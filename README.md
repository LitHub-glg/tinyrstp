# 基于LACP与BPDU协同探测的动态自愈无环网络仿真

## 项目简介

本项目实现了一个针对4节点全互联网络的动态自愈无环网络方案仿真系统，摒弃了传统STP收敛速度慢的缺陷，通过LACP实现链路物理状态的毫秒级探测，结合自定义BPDU完成设备存活与拓扑逻辑状态感知。

## 技术方案

详细技术方案请参考：[技术方案.md](./技术方案.md)

## 项目结构

```
solo_cpc/
├── 技术方案.md          # 详细技术方案文档
├── node.py              # 节点类定义
├── link.py              # 链路类定义
├── lacp.py              # LACP探测模块
├── bpdu.py              # BPDU协议模块
├── topology.py           # 拓扑管理模块
├── stp.py               # 生成树计算模块
├── visualizer.py         # 可视化模块
├── simulator.py          # 仿真主程序
├── requirements.txt      # 依赖包
└── README.md            # 本文件
```

## 安装依赖

```bash
pip install -r requirements.txt
```

## 运行仿真

```bash
python simulator.py
```

如需无GUI模式运行：

```bash
python simulator.py --no-gui
```

## 仿真场景

程序会自动执行以下测试场景：

1. **初始状态**：4节点全互联网络，建立初始生成树
2. **场景1**（5秒后）：注入Node1-Node2链路故障
3. **场景2**（12秒后）：恢复Node1-Node2链路
4. **场景3**（20秒后）：注入Node3节点故障

## 可视化说明

- **蓝色节点**：正常节点
- **绿色节点**：根节点
- **红色节点**：故障节点
- **绿色粗线**：生成树链路（转发状态）
- **灰色细线**：备用链路（阻塞状态）
- **灰色虚线**：故障链路

## 核心特性

- ✅ LACP毫秒级链路探测
- ✅ 自定义BPDU拓扑感知
- ✅ 改进Prim算法生成树
- ✅ 动态故障自愈
- ✅ 实时可视化
- ✅ 链路/节点故障注入
